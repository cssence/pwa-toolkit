!function(a,b){"use strict";var c,d,e,f,g,h,i,j={},k=1,l=7,m=new Date;for(c=a.createElement("table"),f=new Date(m),j.year={},j.year["this"]=m.getFullYear(),j.year.last=j.year["this"]-1,j.year.next=j.year["this"]+1,j.week={},j.week["this"]=k-m.getDay(),j.week["this"]>0&&(j.week["this"]-=l),j.week.last=j.week["this"]-l,j.week.next=j.week["this"]+l,j.first=j.week["this"]-5*l,j.last=j.week.next-1+50*l,g=function(a){j.current===j.week[a]&&(d.id=a+"-week")},f.setDate(m.getDate()+j.first),j.current=j.first;j.current<=j.last;j.current+=1)f.getDay()===k&&(d=a.createElement("tr"),["last","this","next"].forEach(g)),e=a.createElement("td"),e.setAttribute("data-date",f.toISOString().split("T")[0]),e.setAttribute("data-day",f.getDate()),1===f.getDate()&&e.setAttribute("data-month",f.toGMTString().split(" ")[2].toUpperCase()),0===j.current&&(e.id="today"),-1!==[0,6].indexOf(f.getDay())&&e.classList.add("weekend"),f.getMonth()%2!==m.getMonth()%2&&e.classList.add("alternate"),d.appendChild(e),f.setDate(f.getDate()+1),f.getDay()===k&&c.appendChild(d);a.body.appendChild(c),a.getElementById("last-week").scrollIntoView(!0),a.body.addEventListener("click",function(b){var c,d;c=a.querySelector("[aria-expanded]"),Array.prototype.forEach.call(b.path,function(a){d=d||"function"==typeof a.getAttribute&&a.getAttribute("data-date")&&a}),d!==c&&(c&&c.removeAttribute("aria-expanded"),d&&!d.getAttribute("aria-expanded")&&d.querySelector(".events")&&d.setAttribute("aria-expanded","true"))}),"object"==typeof b.data&&(h=function(a,b,c){(a||[]).forEach(function(a){a[b]&&c(a)})},i=function(c,d,e){if(c){var f,g,h,i={};h=function(b,c,d,e){var f;return e=e||{},d&&(f=a.createElement(c),["className","title"].forEach(function(a){e[a]&&(f[a]=e[a])}),d&&"boolean"!=typeof d&&(f[e.html?"innerHTML":"textContent"]=d),b.appendChild(f)),f},f=c.querySelector("ul")||h(c,"ul",!0,{className:"events"}),g=a.createElement("li"),g.className="event "+d,i.time=(e.due||e.start).slice(11,16),h(g,"time",i.time),i.name=e.name.split(" "),i.name.forEach(function(a,b){a&&-1!==["#","@","+"].indexOf(a.charAt(0))&&(i.name[b]="<i class=tag title="+a+">"+a.slice(1)+"</i>")}),g.innerHTML+=" "+i.name.join(" "),h(g,"p",(e.location||"").replace(/[\s\S]+/,function(a){var c="https://www.google.com/maps?q="+encodeURIComponent(a);return b.makeLink(c,{text:a}).outerHTML}),{className:"location",html:!0}),h(g,"p",(e.description||"").replace(/(https?)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/g,function(a){return b.makeLink(a,{text:a}).outerHTML}),{className:"description",html:!0}),f.appendChild(g)}},h(b.data.holidays,"start",function(b){e=a.querySelector("[data-date='"+b.start+"']"),e&&e.setAttribute("data-public-holiday",b.name||"")}),h(b.data.birthdays,"start",function(b){var c,d;b.name+=" #",["last","this","next"].forEach(function(f){f=j.year[f],c=b.start.split("-"),d=parseInt(c[0],10),c[0]=f,e=a.querySelector("[data-date='"+c.join("-")+"']"),b.name=b.name.slice(0,b.name.lastIndexOf("#")+1)+(f-d),i(e,"birthday",b)})}),h(b.data.events,"start",function(b){e=a.querySelector("[data-date='"+b.start.slice(0,10)+"']"),i(e,"simplified",b)}),h(b.data.tasks,"due",function(b){e=a.querySelector("[data-date='"+b.due.slice(0,10)+"']"),i(e,"task",b)}))}(document,App);