!function(t,e){"use strict";var a,n,r,i,s,o,c,l={},d=1,u=7,p=new Date;for(a=t.createElement("table"),i=new Date(p),l.year={},l.year.this=p.getFullYear(),l.year.last=l.year.this-1,l.year.next=l.year.this+1,l.week={},l.week.this=d-p.getDay(),l.week.this>0&&(l.week.this-=u),l.week.last=l.week.this-u,l.week.next=l.week.this+u,l.first=l.week.this-5*u,l.last=l.week.next-1+50*u,s=function(t){l.current===l.week[t]&&(n.id=t+"-week")},i.setDate(p.getDate()+l.first),l.current=l.first;l.current<=l.last;l.current+=1)i.getDay()===d&&(n=t.createElement("tr"),["last","this","next"].forEach(s)),r=t.createElement("td"),r.setAttribute("data-date",i.toISOString().split("T")[0]),r.setAttribute("data-day",i.getDate()),1===i.getDate()&&r.setAttribute("data-month",i.toGMTString().split(" ")[2].toUpperCase()),0===l.current&&(r.id="today"),[0,6].indexOf(i.getDay())!==-1&&r.classList.add("weekend"),i.getMonth()%2!==p.getMonth()%2&&r.classList.add("alternate"),n.appendChild(r),i.setDate(i.getDate()+1),i.getDay()===d&&a.appendChild(n);t.body.appendChild(a),t.getElementById("last-week").scrollIntoView(!0),t.body.addEventListener("click",function(e){var a,n;a=t.querySelector("[aria-expanded]"),Array.prototype.forEach.call(e.path,function(t){n=n||"function"==typeof t.getAttribute&&t.getAttribute("data-date")&&t}),n!==a&&(a&&a.removeAttribute("aria-expanded"),n&&!n.getAttribute("aria-expanded")&&n.querySelector(".events")&&n.setAttribute("aria-expanded","true"))}),"object"==typeof e.data&&(o=function(t,e,a){(t||[]).forEach(function(t){t[e]&&a(t)})},c=function(a,n,r){if(a){var i,s,o,c={};o=function(e,a,n,r){var i;return r=r||{},n&&(i=t.createElement(a),["className","title"].forEach(function(t){r[t]&&(i[t]=r[t])}),n&&"boolean"!=typeof n&&(i[r.html?"innerHTML":"textContent"]=n),e.appendChild(i)),i},i=a.querySelector("ul")||o(a,"ul",!0,{className:"events"}),s=t.createElement("li"),s.className="event "+n,c.time=(r.due||r.start).slice(11,16),o(s,"time",c.time),c.name=r.name.split(" "),c.name.forEach(function(t,e){t&&["#","@","+"].indexOf(t.charAt(0))!==-1&&(c.name[e]="<i class=tag title="+t+">"+t.slice(1)+"</i>")}),s.innerHTML+=" "+c.name.join(" "),o(s,"p",(r.location||"").replace(/[\s\S]+/,function(t){var a="https://www.google.com/maps?q="+encodeURIComponent(t);return e.makeLink(a,{text:t}).outerHTML}),{className:"location",html:!0}),o(s,"p",(r.description||"").replace(/(https?)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/g,function(t){return e.makeLink(t,{text:t}).outerHTML}),{className:"description",html:!0}),i.appendChild(s)}},o(e.data.holidays,"start",function(e){r=t.querySelector("[data-date='"+e.start+"']"),r&&r.setAttribute("data-public-holiday",e.name||"")}),o(e.data.birthdays,"start",function(e){var a,n;e.name+=" #",["last","this","next"].forEach(function(i){i=l.year[i],a=e.start.split("-"),n=parseInt(a[0],10),a[0]=i,r=t.querySelector("[data-date='"+a.join("-")+"']"),e.name=e.name.slice(0,e.name.lastIndexOf("#")+1)+(i-n),c(r,"birthday",e)})}),o(e.data.events,"start",function(e){r=t.querySelector("[data-date='"+e.start.slice(0,10)+"']"),c(r,"simplified",e)}),o(e.data.tasks,"due",function(e){r=t.querySelector("[data-date='"+e.due.slice(0,10)+"']"),c(r,"task",e)}))}(document,App);